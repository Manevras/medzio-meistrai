<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Medžio Meistrai - Profesionalus grindų, parketo ir baldų restauravimas visoje Lietuvoje. Daugiau nei 20 metų patirties.">
    <meta name="keywords" content="grindų restauravimas, parketo šlifavimas, baldų atnaujinimas, medinės grindys, Lietuva">
    <title>Medžio Meistrai | Profesionalus Grindų ir Parketo Restauravimas</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'cream':    '#fdfbf7',
                        'chocolate':'#3d2b1f',
                        'charcoal': '#1b140d',
                        'gold':     '#b08d57',
                        'gold-light':'#d4b483',
                        'warm-gray':'#8c7b6e',
                    },
                    fontFamily: {
                        'display': ['"Playfair Display"', 'serif'],
                        'body':    ['"Work Sans"', 'sans-serif'],
                    },
                },
            },
        }
    </script>

    <style>
        :root {
            --cream: #fdfbf7;
            --chocolate: #3d2b1f;
            --charcoal: #1b140d;
            --gold: #b08d57;
            --gold-light: #d4b483;
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            background-color: var(--cream);
            color: var(--charcoal);
            font-family: 'Work Sans', sans-serif;
            margin: 0;
            overflow-x: hidden;
        }

        /* ===== HEADER ===== */
        #main-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(253,251,247,0.96);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(61,43,31,0.06);
            transition: box-shadow 0.3s;
        }
        #main-header.scrolled {
            box-shadow: 0 2px 24px rgba(61,43,31,0.06);
        }

        /* ===== HERO ===== */
        #pradzia { padding: 1rem 1.5rem 1.5rem; }
        .hero-frame {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
            border: 1px solid rgba(61,43,31,0.15);
        }
        .hero-inner {
            position: relative;
            width: 100%;
            height: 55vh;
            max-height: 520px;
            overflow: hidden;
        }
        .hero-inner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s ease;
        }
        .hero-inner:hover img { transform: scale(1.03); }
        .hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.25) 0%, rgba(0,0,0,0.45) 100%);
        }
        .hero-text {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }
        .hero-text h2 {
            font-family: 'Playfair Display', serif;
            font-weight: 400;
            font-size: clamp(2.2rem, 6vw, 5rem);
            color: #fff;
            line-height: 1.2;
            letter-spacing: 0.02em;
            animation: fadeUp 1.2s ease both;
        }
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(24px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* ===== ABOUT ===== */
        #apie { padding: 2.5rem 1.5rem; }
        .about-grid {
            max-width: 1100px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
        }
        @media (max-width: 768px) {
            .about-grid { grid-template-columns: 1fr; gap: 2rem; }
        }
        .about-img-wrap { position: relative; overflow: hidden; }
        .about-img-wrap::before {
            content: '';
            position: absolute;
            top: -12px; left: -12px;
            right: 12px; bottom: 12px;
            border: 1px solid rgba(176,141,87,0.3);
            z-index: 0;
            pointer-events: none;
        }
        .about-img-wrap img {
            position: relative;
            z-index: 1;
            width: 100%;
            aspect-ratio: 3/2;
            object-fit: cover;
            filter: grayscale(20%) sepia(10%);
            transition: filter 0.7s ease;
        }
        .about-img-wrap:hover img { filter: grayscale(0%) sepia(0%); }
        .about-content { display: flex; flex-direction: column; gap: 1rem; }
        .about-label {
            font-size: 0.65rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--gold);
            font-weight: 500;
        }
        .about-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 400;
            color: var(--charcoal);
            line-height: 1.1;
        }
        .about-quote {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 1.15rem;
            color: rgba(61,43,31,0.8);
            line-height: 1.7;
            border-left: 2px solid var(--gold);
            padding-left: 1.2rem;
        }
        .about-body {
            font-size: 0.95rem;
            color: rgba(27,20,13,0.65);
            line-height: 1.85;
            font-weight: 300;
        }
        .btn-outline {
            display: inline-block;
            padding: 0.8rem 2rem;
            border: 1px solid var(--chocolate);
            color: var(--chocolate);
            font-family: 'Work Sans', sans-serif;
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            cursor: pointer;
            transition: background 0.3s, color 0.3s, transform 0.2s;
            background: transparent;
        }
        .btn-outline:hover {
            background: var(--chocolate);
            color: var(--cream);
            transform: scale(1.03);
        }
        #extended-content { display: none; }
        #extended-content.open { display: block; }

        /* ===== SERVICES ===== */
        #paslaugos { padding: 2.5rem 1.5rem; background: rgba(61,43,31,0.02); }
        .services-grid { max-width: 1100px; margin: 0 auto; }
        .services-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }
        @media (min-width: 900px) {
            .services-cards { grid-template-columns: repeat(4, 1fr); }
        }
        @media (max-width: 480px) {
            .services-cards { grid-template-columns: 1fr; }
        }
        .service-card {
            position: relative;
            padding: 1.8rem 1.4rem;
            border: 1px solid rgba(61,43,31,0.1);
            background: var(--cream);
            cursor: pointer;
            text-decoration: none;
            display: block;
            overflow: hidden;
            transition: border-color 0.3s, transform 0.3s, box-shadow 0.3s;
        }
        .service-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(176,141,87,0.07) 0%, rgba(253,251,247,0) 60%);
            opacity: 0;
            transition: opacity 0.4s;
        }
        .service-card:hover {
            border-color: rgba(176,141,87,0.5);
            transform: translateY(-4px);
            box-shadow: 0 16px 48px rgba(61,43,31,0.08);
        }
        .service-card:hover::before { opacity: 1; }
        .service-icon {
            font-size: 2rem;
            color: var(--gold);
            margin-bottom: 1.2rem;
            display: block;
            font-family: 'Material Symbols Outlined';
            font-weight: 200;
        }
        .service-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.25rem;
            color: var(--charcoal);
            line-height: 1.3;
            margin-bottom: 0.6rem;
        }
        .service-desc {
            font-size: 0.8rem;
            color: rgba(61,43,31,0.55);
            line-height: 1.6;
            font-weight: 300;
        }
        .service-arrow {
            position: absolute;
            bottom: 1.5rem;
            right: 1.5rem;
            font-size: 1rem;
            color: rgba(176,141,87,0);
            font-family: 'Material Symbols Outlined';
            transition: color 0.3s, transform 0.3s;
        }
        .service-card:hover .service-arrow {
            color: var(--gold);
            transform: translate(3px, -3px);
        }

        /* ===== FREE ESTIMATE CARD ===== */
        .service-card-estimate {
            position: relative;
            padding: 1.8rem 1.4rem;
            border: 1px solid rgba(176,141,87,0.35);
            background: linear-gradient(145deg, rgba(176,141,87,0.06) 0%, var(--cream) 60%);
            cursor: pointer;
            text-decoration: none;
            display: block;
            overflow: hidden;
            transition: border-color 0.3s, transform 0.3s, box-shadow 0.3s;
        }
        .service-card-estimate::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(176,141,87,0.12) 0%, rgba(253,251,247,0) 70%);
            opacity: 0;
            transition: opacity 0.4s;
        }
        .service-card-estimate:hover {
            border-color: rgba(176,141,87,0.7);
            transform: translateY(-4px);
            box-shadow: 0 16px 48px rgba(176,141,87,0.12);
        }
        .service-card-estimate:hover::before { opacity: 1; }
        .estimate-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--gold);
            color: var(--cream);
            font-size: 0.55rem;
            font-weight: 600;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            padding: 0.25rem 0.6rem;
        }

        /* ===== VIDEO SECTION – DESKTOP OPTIMIZED ===== */
        #animacija { padding: 2.5rem 1.5rem; background: rgba(61,43,31,0.02); }
        .video-container {
            max-width: 1100px;
            margin: 0 auto;
        }
        .video-wrapper {
            position: relative;
            width: 100%;
            overflow: hidden;
            border: 1px solid rgba(61,43,31,0.12);
        }
        .video-wrapper video {
            width: 100%;
            display: block;
            max-height: 420px;
            object-fit: cover;
        }
        @media (min-width: 900px) {
            .video-wrapper {
                width: 70%;
                margin: 0 auto;
                box-shadow: 0 12px 48px rgba(61,43,31,0.1);
            }
            .video-wrapper video {
                max-height: 380px;
            }
        }

        /* ===== DIVIDER ===== */
        .gold-divider {
            width: 40px;
            height: 1px;
            background: var(--gold);
            opacity: 0.4;
            margin: 1rem auto 0;
        }

        /* ===== SECTION TITLE ===== */
        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.8rem, 4vw, 2.8rem);
            font-weight: 400;
            color: var(--charcoal);
        }

        /* ===== CONTACTS ===== */
        #kontaktai { padding: 2.5rem 1.5rem 3rem; background: var(--cream); }
        .contact-wrap { max-width: 560px; margin: 0 auto; text-align: center; }
        .contact-name {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--charcoal);
            margin-top: 1.5rem;
        }
        .contact-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--charcoal);
            text-decoration: none;
            font-size: 1rem;
            transition: color 0.3s;
            font-weight: 300;
        }
        .contact-link:hover { color: var(--gold); }
        .material-symbols-outlined {
            font-family: 'Material Symbols Outlined';
            font-size: inherit;
            line-height: 1;
        }
        .btn-primary {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            width: 100%;
            padding: 1.1rem;
            background: var(--charcoal);
            color: #fff;
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            text-decoration: none;
            transition: background 0.3s, transform 0.2s;
        }
        .btn-primary:hover { background: var(--gold); transform: scale(1.02); }
        .btn-secondary {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            width: 100%;
            padding: 1.1rem;
            border: 2px solid var(--charcoal);
            color: var(--charcoal);
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            text-decoration: none;
            transition: background 0.3s, color 0.3s, transform 0.2s;
        }
        .btn-secondary:hover { background: var(--charcoal); color: #fff; transform: scale(1.02); }

        /* ===== FOOTER ===== */
        footer { padding: 2.5rem 1.5rem; border-top: 1px solid rgba(61,43,31,0.06); text-align: center; }

        /* ===== REVIEWS SECTION ===== */
        #atsiliepimai {
            padding: 3rem 1.5rem;
            background: var(--cream);
        }
        .reviews-container {
            max-width: 1100px;
            margin: 0 auto;
        }

        /* Rating Summary */
        

        /* Reviews Grid */
        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.2rem;
            margin-top: 1.5rem;
        }
        .review-card {
            background: #fff;
            border: 1px solid rgba(61,43,31,0.07);
            padding: 1.6rem;
            position: relative;
            transition: box-shadow 0.3s, transform 0.3s;
        }
        .review-card:hover {
            box-shadow: 0 8px 32px rgba(61,43,31,0.07);
            transform: translateY(-2px);
        }
        .review-card.pending-card {
            opacity: 0.5;
            border-style: dashed;
        }
        .review-header {
            display: flex;
            align-items: center;
            gap: 0.9rem;
            margin-bottom: 0.9rem;
        }
        .review-avatar {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Playfair Display', serif;
            font-size: 1rem;
            color: var(--cream);
            font-weight: 400;
            flex-shrink: 0;
        }
        .review-name {
            font-family: 'Playfair Display', serif;
            font-size: 0.95rem;
            color: var(--charcoal);
        }
        .review-date {
            font-size: 0.65rem;
            color: rgba(61,43,31,0.35);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-top: 0.1rem;
        }
        .review-text {
            font-size: 0.88rem;
            color: rgba(27,20,13,0.65);
            line-height: 1.75;
            font-weight: 300;
        }
        .review-verified {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.6rem;
            color: rgba(176,141,87,0.7);
            letter-spacing: 0.12em;
            text-transform: uppercase;
            margin-top: 0.9rem;
        }
        .review-verified .material-symbols-outlined {
            font-size: 0.8rem;
        }

        /* New review slide-in animation */
        @keyframes slideInReview {
            from { opacity: 0; transform: translateY(-16px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        .review-new {
            animation: slideInReview 0.5s cubic-bezier(0.16, 1, 0.3, 1) both;
            border-color: rgba(176,141,87,0.3);
        }

        /* Leave Review Button */
        .btn-review {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.8rem 2rem;
            border: 1px solid var(--gold);
            color: var(--gold);
            font-family: 'Work Sans', sans-serif;
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            cursor: pointer;
            background: transparent;
            transition: background 0.3s, color 0.3s, transform 0.2s, box-shadow 0.3s;
        }
        .btn-review:hover {
            background: var(--gold);
            color: var(--cream);
            transform: scale(1.03);
            box-shadow: 0 8px 24px rgba(176,141,87,0.2);
        }

        /* Admin panel */
        .admin-panel {
            display: none;
            background: rgba(61,43,31,0.03);
            border: 1px solid rgba(61,43,31,0.1);
            padding: 1.5rem;
            margin-top: 2rem;
        }
        .admin-panel.open { display: block; }
        .admin-title {
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: rgba(61,43,31,0.4);
            margin-bottom: 1rem;
        }
        .pending-review-item {
            background: #fff;
            border: 1px dashed rgba(61,43,31,0.15);
            padding: 1rem;
            margin-bottom: 0.8rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .pending-actions {
            display: flex;
            gap: 0.5rem;
        }
        .btn-approve, .btn-reject {
            padding: 0.4rem 1rem;
            font-size: 0.65rem;
            font-weight: 500;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            cursor: pointer;
            border: none;
            transition: opacity 0.2s;
        }
        .btn-approve { background: var(--gold); color: var(--cream); }
        .btn-reject  { background: rgba(61,43,31,0.1); color: var(--charcoal); }
        .btn-approve:hover, .btn-reject:hover { opacity: 0.8; }

        /* ===== MODAL ===== */
        .modal-backdrop {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(27,20,13,0.6);
            backdrop-filter: blur(4px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        .modal-backdrop.open {
            display: flex;
            animation: fadeBackdrop 0.3s ease;
        }
        @keyframes fadeBackdrop {
            from { opacity: 0; }
            to   { opacity: 1; }
        }
        .modal-box {
            background: var(--cream);
            width: 100%;
            max-width: 520px;
            padding: 2.5rem 2rem;
            position: relative;
            animation: slideModal 0.35s cubic-bezier(0.16, 1, 0.3, 1) both;
        }
        @keyframes slideModal {
            from { opacity: 0; transform: translateY(24px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        .modal-close {
            position: absolute;
            top: 1.2rem; right: 1.4rem;
            background: none;
            border: none;
            cursor: pointer;
            color: rgba(61,43,31,0.4);
            font-family: 'Material Symbols Outlined';
            font-size: 1.4rem;
            line-height: 1;
            transition: color 0.2s;
            padding: 0;
        }
        .modal-close:hover { color: var(--charcoal); }
        .modal-label {
            font-size: 0.6rem;
            letter-spacing: 0.22em;
            text-transform: uppercase;
            color: var(--gold);
            font-weight: 500;
            display: block;
            margin-bottom: 0.4rem;
        }
        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 400;
            color: var(--charcoal);
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }
        .modal-field {
            margin-bottom: 1.1rem;
        }
        .modal-field label {
            display: block;
            font-size: 0.65rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: rgba(61,43,31,0.5);
            margin-bottom: 0.4rem;
            font-weight: 500;
        }
        .modal-field input,
        .modal-field textarea {
            width: 100%;
            border: 1px solid rgba(61,43,31,0.15);
            background: #fff;
            padding: 0.75rem 0.9rem;
            font-family: 'Work Sans', sans-serif;
            font-size: 0.9rem;
            color: var(--charcoal);
            outline: none;
            transition: border-color 0.25s;
            resize: none;
        }
        .modal-field input:focus,
        .modal-field textarea:focus {
            border-color: var(--gold);
        }
        .modal-field input.error,
        .modal-field textarea.error {
            border-color: rgba(180,60,60,0.5);
        }
        .field-error-msg {
            font-size: 0.65rem;
            color: rgba(160,40,40,0.75);
            margin-top: 0.25rem;
            display: none;
            letter-spacing: 0.05em;
        }
        .field-error-msg.show { display: block; }

        

        /* Spam honeypot */
        .hp-field { display: none !important; }

        /* Rate limit message */
        .rate-msg {
            font-size: 0.75rem;
            color: rgba(160,40,40,0.75);
            text-align: center;
            margin-top: 0.5rem;
            display: none;
        }
        .rate-msg.show { display: block; }

        /* Modal submit */
        .btn-modal-submit {
            width: 100%;
            padding: 1rem;
            background: var(--charcoal);
            color: var(--cream);
            border: none;
            font-family: 'Work Sans', sans-serif;
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.22em;
            text-transform: uppercase;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
            margin-top: 0.5rem;
        }
        .btn-modal-submit:hover { background: var(--gold); transform: scale(1.01); }
        .btn-modal-submit:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        /* Success message */
        .modal-success {
            display: none;
            text-align: center;
            padding: 1.5rem 0;
        }
        .modal-success.show { display: block; }
        .modal-form-wrap.hide { display: none; }
        .success-icon {
            font-family: 'Material Symbols Outlined';
            font-size: 3rem;
            color: var(--gold);
            font-variation-settings: 'FILL' 1;
            display: block;
            margin-bottom: 0.8rem;
        }
    </style>
</head>

<body>

<!-- ======== STICKY HEADER ======== -->
<header id="main-header">
    <div style="display:flex; align-items:center; justify-content:center; padding:1.3rem 1.5rem;">
        <a href="#pradzia" style="text-decoration:none;">
            <h1 style="font-family:'Cormorant Garamond',serif; font-size:1.15rem; letter-spacing:0.3em; font-weight:300; color:var(--charcoal); text-transform:uppercase; transition:color 0.3s; margin:0;"
                onmouseover="this.style.color='var(--gold)'" onmouseout="this.style.color='var(--charcoal)'">
                Medžio Meistrai
            </h1>
        </a>
    </div>
</header>

<!-- ======== HERO SECTION ======== -->
<section id="pradzia">
    <div class="hero-frame">
        <div class="hero-inner">
            <img src="assets/images/hero-default.jpg" alt="Medžio Meistrai – Profesionalus grindų restauravimas" loading="eager" />
            <div class="hero-overlay"></div>
            <div class="hero-text">
                <h2>Sugrąžiname medžiui<br>jo tikrąją vertę.</h2>
            </div>
        </div>
    </div>
    <div style="display:flex; justify-content:center; margin-top:1.2rem;">
        <div class="gold-divider"></div>
    </div>
</section>

<!-- ======== ABOUT SECTION ======== -->
<section id="apie">
    <div class="about-grid">
        <div class="about-img-wrap">
            <img src="assets/images/about-default.jpg" alt="Medžio restauravimo procesas" loading="lazy" />
        </div>
        <div class="about-content">
            <span class="about-label">Mūsų istorija</span>
            <h3 class="about-title">Patirtis,<br>kuri kalba pati.</h3>
            <p class="about-quote">
                "Kiekvienas rėžis, kiekviena faktūra pasakoja savo istoriją. Mes esame čia, kad tą istoriją išsaugotume ateities kartoms."
            </p>
            <p class="about-body">
                Mūsų studija gimė iš paprastos, bet tvirtos idėjos – medžiui reikia ne tik meistriškų rankų, bet ir supratimo. Medis yra gyva, kvėpuojanti medžiaga, kuri sugeria namų tylą, vaikų juoką, kasdienybės ritmą.
            </p>
            <div id="extended-content">
                <p class="about-body" style="margin-bottom:1rem;">
                    Daugiau nei du dešimtmečius dirbame su medinių grindų, laiptų ir baldų atnaujinimu visoje Lietuvoje. Esame šeimos verslas, kuriame patirtis perduodama kartu su vertybėmis – atsakomybe, kruopštumu ir pagarba kiekvienai detalei.
                </p>
                <p class="about-body" style="margin-bottom:1rem;">
                    Tinkamai parinktos medžiagos, profesionali įranga ir kantrus rankų darbas leidžia pasiekti ilgaamžį efektą. Mums svarbu, kad atnaujintas paviršius ne tik atrodytų estetiškai, bet ir išliktų patvarus daugelį metų. Todėl kiekvieną projektą vertiname individualiai.
                </p>
                <p class="about-body">
                    Tai pasitikėjimas, kurį pelnėme nuosekliu darbu ir sąžiningu požiūriu. Jei ieškote patikimų meistrų, kurie dirba atsakingai ir su meile savo amatui, būsime pasiruošę pasirūpinti ir jūsų namų istorijos tąsa.
                </p>
            </div>
            <button class="btn-outline" id="read-more-btn">Skaityti daugiau</button>
        </div>
    </div>
</section>

<!-- ======== SERVICES SECTION ======== -->
<section id="paslaugos">
    <div class="services-grid">
        <div style="text-align:center;">
            <h3 class="section-title">Paslaugos</h3>
            <div class="gold-divider"></div>
        </div>
        <div class="services-cards">

            <!-- Card 1 -->
            <a href="#kontaktai" class="service-card smooth-scroll">
                <span class="service-icon">park</span>
                <p class="service-name">Parketo restauravimas</p>
                <p class="service-desc">Šlifavimas, lakavimas ir senų grindų atgaivinimas iki pirminės grožybės.</p>
                <span class="service-arrow">north_east</span>
            </a>

            <!-- Card 2 -->
            <a href="#kontaktai" class="service-card smooth-scroll">
                <span class="service-icon">chair</span>
                <p class="service-name">Baldų atnaujinimas</p>
                <p class="service-desc">Seni baldai įgauna naują gyvenimą – kruopštus valymas, dažymas, poliravimas.</p>
                <span class="service-arrow">north_east</span>
            </a>

            <!-- Card 3 -->
            <a href="#kontaktai" class="service-card smooth-scroll">
                <span class="service-icon">roofing</span>
                <p class="service-name">Medinių lubų priežiūra</p>
                <p class="service-desc">Lubų medžio apsauga ir atnaujinimas – ilgaamžis rezultatas bet kokiai patalpai.</p>
                <span class="service-arrow">north_east</span>
            </a>

            <!-- Card 4 – FREE ESTIMATE (NEW) -->
            <a href="#estimate-modal-trigger" class="service-card-estimate smooth-scroll" onclick="openEstimateModal(event)">
                <span class="estimate-badge">Nemokama</span>
                <span class="service-icon" style="font-family:'Material Symbols Outlined';font-variation-settings:'FILL' 0;color:var(--gold);">calculate</span>
                <p class="service-name">Nemokamas įvertinimas</p>
                <p class="service-desc" style="font-size:0.8rem; color:rgba(61,43,31,0.55); line-height:1.6; font-weight:300;">
                    Aprašykite savo projektą ir per 24 val. gausite preliminarų kainos pasiūlymą. Jokių įsipareigojimų.
                </p>
                <span class="service-arrow" style="font-family:'Material Symbols Outlined'">north_east</span>
            </a>

        </div>
    </div>
</section>

<!-- ======== VIDEO SECTION – PRO OPTIMIZED ======== -->
<section id="animacija">
    <div class="video-container">
        <div style="text-align:center; margin-bottom:1.5rem;">
            <h3 class="section-title">Meistrystė veikime</h3>
            <div class="gold-divider"></div>
        </div>
        <div class="video-wrapper">
            <video autoplay loop muted playsinline>
                <source src="assets/videos/restoration-animation.mp4" type="video/mp4">
            </video>
        </div>
        <p style="font-family:'Playfair Display',serif; font-style:italic; font-size:1.1rem; color:rgba(27,20,13,0.5); text-align:center; margin-top:1.2rem;">
            Meistrystė, kurią jaučia medis.
        </p>
    </div>
</section>

<!-- ======== REVIEWS SECTION ======== -->
<section id="atsiliepimai">
    <div class="reviews-container">
        <div style="text-align:center;">
            <h3 class="section-title">Atsiliepimai</h3>
            <div class="gold-divider"></div>
        </div>

        
            <div style="text-align:center;">
                <button class="btn-review" onclick="openReviewModal()">
                    <span class="material-symbols-outlined" style="font-size:1rem;">rate_review</span>
                    Palikti atsiliepimą
                </button>
            </div>
        </div>

        <!-- Reviews Grid -->
        <div class="reviews-grid" id="reviews-grid">
            <!-- Reviews will be rendered by JS -->
        </div>

        <!-- Admin Panel (hidden, activated by Ctrl+Shift+A) -->
        <div class="admin-panel" id="admin-panel">
            <p class="admin-title">&#9679; Admin režimas – laukiantys atsiliepimai</p>
            <div id="pending-list"></div>
            <p id="no-pending-msg" style="font-size:0.8rem; color:rgba(61,43,31,0.4); display:none;">Nėra laukiančių atsiliepimų.</p>
        </div>
    </div>
</section>

<!-- ======== CONTACTS SECTION ======== -->
<section id="kontaktai">
    <div class="contact-wrap">
        <span class="about-label">Susisiekite su mumis</span>
        <h4 class="section-title" style="margin-top:0.5rem;">Pradėkime<br>pokalbį.</h4>
        <div class="gold-divider" style="margin-bottom:2.5rem;"></div>

        <div style="display:flex; flex-direction:column; gap:0.8rem; margin-bottom:2.5rem;">
            <div>
                <p style="font-size:0.6rem; letter-spacing:0.2em; text-transform:uppercase; color:rgba(61,43,31,0.4); margin:0 0 0.2rem;">Meistras</p>
                <p class="contact-name">Jaunius</p>
            </div>
            <a href="tel:+37060534774" class="contact-link" style="justify-content:center;">
                <span class="material-symbols-outlined" style="font-size:1.2rem;">call</span>
                +370 605 34774
            </a>
            <a href="/cdn-cgi/l/email-protection#f69b93928c9f99d89b939f858284979fd88697859a9783919985b6919b979f9ad895999b" class="contact-link" style="justify-content:center; font-size:0.9rem;">
                <span class="material-symbols-outlined" style="font-size:1.2rem;">mail</span>
                <span class="__cf_email__" data-cfemail="f8959d9c829197d6959d918b8c8a9991d688998b94998d9f978bb89f95999194d69b9795">[email&#160;protected]</span>
            </a>
        </div>

        <div style="display:flex; flex-direction:column; gap:0.8rem;">
            <a href="tel:+37060534774" class="btn-primary">
                <span class="material-symbols-outlined" style="font-size:1.1rem;">call</span>
                Skambinti dabar
            </a>
            <a href="/cdn-cgi/l/email-protection#5c313938263533723139352f282e3d35722c3d2f303d293b332f1c3b313d3530723f3331" class="btn-secondary">
                <span class="material-symbols-outlined" style="font-size:1.1rem;">mail</span>
                Rašyti laišką
            </a>
            <p style="font-size:0.6rem; letter-spacing:0.18em; text-transform:uppercase; color:rgba(61,43,31,0.35); text-align:center; padding-top:0.3rem;">
                Konsultuojame visoje Lietuvoje
            </p>
        </div>
    </div>
</section>

<!-- ======== FOOTER ======== -->
<footer>
    <p style="font-family:'Playfair Display',serif; font-style:italic; font-size:1rem; color:rgba(27,20,13,0.45); margin:0 0 0.5rem;">
        Meistrystė, perduodama iš kartos į kartą.
    </p>
    <p style="font-size:0.6rem; letter-spacing:0.2em; text-transform:uppercase; color:rgba(61,43,31,0.25); margin:0;">
        © 2025 Medžio Meistrai
    </p>
</footer>

<!-- ======== REVIEW MODAL ======== -->
<div class="modal-backdrop" id="review-modal" role="dialog" aria-modal="true" aria-label="Palikti atsiliepimą">
    <div class="modal-box" onclick="event.stopPropagation()">
        <button class="modal-close" onclick="closeReviewModal()" aria-label="Uždaryti">close</button>

        <!-- Form -->
        <div class="modal-form-wrap" id="modal-form-wrap">
            <span class="modal-label">Jūsų nuomonė</span>
            <h2 class="modal-title">Palikti<br>atsiliepimą.</h2>

            <form id="review-form" novalidate autocomplete="off">

                <!-- Honeypot (spam protection) -->
                <input type="text" name="website" class="hp-field" tabindex="-1" autocomplete="off">

                <!-- Name -->
                <div class="modal-field">
                    <label for="r-name">Vardas *</label>
                    <input type="text" id="r-name" placeholder="Pvz. Jonas P." maxlength="60">
                    <p class="field-error-msg" id="err-name">Įveskite savo vardą</p>
                </div>

                <!-- Email (hidden from public) -->
                <div class="modal-field">
                    <label for="r-email">El. paštas * <span style="font-size:0.55rem; opacity:0.6;">(nebus rodomas viešai)</span></label>
                    <input type="email" id="r-email" placeholder="jusu@email.com" maxlength="100">
                    <p class="field-error-msg" id="err-email">Įveskite galiojantį el. paštą</p>
                </div>

                <!-- Review Text -->
                <div class="modal-field">
                    <label for="r-text">Atsiliepimas *</label>
                    <textarea id="r-text" rows="4" placeholder="Papasakokite apie savo patirtį..." maxlength="600"></textarea>
                    <p class="field-error-msg" id="err-text">Atsiliepimas per trumpas (min. 20 simbolių)</p>
                </div>

                <p class="rate-msg" id="rate-msg">Per daug bandymų. Palaukite prieš siunčiant naują atsiliepimą.</p>

                <button type="submit" class="btn-modal-submit" id="submit-btn">
                    Siųsti atsiliepimą
                </button>

                <p style="font-size:0.6rem; text-align:center; color:rgba(61,43,31,0.3); margin-top:0.8rem; letter-spacing:0.1em;">
                    Atsiliepimas bus matomas po peržiūros
                </p>
            </form>
        </div>

        <!-- Success State -->
        <div class="modal-success" id="modal-success">
            <span class="success-icon material-symbols-outlined">check_circle</span>
            <p style="font-family:'Playfair Display',serif; font-size:1.4rem; color:var(--charcoal); margin-bottom:0.5rem;">Ačiū!</p>
            <p style="font-size:0.85rem; color:rgba(61,43,31,0.55); line-height:1.7;">
                Jūsų atsiliepimas gautas ir bus matomas po peržiūros.
            </p>
        </div>
    </div>
</div>

<!-- ======== FREE ESTIMATE MODAL ======== -->
<div class="modal-backdrop" id="estimate-modal" role="dialog" aria-modal="true" aria-label="Nemokamas įvertinimas">
    <div class="modal-box" onclick="event.stopPropagation()">
        <button class="modal-close" onclick="closeEstimateModal()" aria-label="Uždaryti">close</button>

        <div id="estimate-form-wrap">
            <span class="modal-label">Nemokamas pasiūlymas</span>
            <h2 class="modal-title">Gaukite kainą<br>per 24 val.</h2>

            <form id="estimate-form" novalidate>
                <input type="text" name="website2" class="hp-field" tabindex="-1" autocomplete="off">

                <div class="modal-field">
                    <label for="e-name">Vardas *</label>
                    <input type="text" id="e-name" placeholder="Pvz. Rūta K." maxlength="60">
                    <p class="field-error-msg" id="e-err-name">Įveskite savo vardą</p>
                </div>

                <div class="modal-field">
                    <label for="e-phone">Telefonas *</label>
                    <input type="tel" id="e-phone" placeholder="+370 600 00000" maxlength="20">
                    <p class="field-error-msg" id="e-err-phone">Įveskite telefono numerį</p>
                </div>

                <div class="modal-field">
                    <label for="e-type">Paslaugos tipas</label>
                    <select id="e-type" style="width:100%;border:1px solid rgba(61,43,31,0.15);background:#fff;padding:0.75rem 0.9rem;font-family:'Work Sans',sans-serif;font-size:0.9rem;color:var(--charcoal);outline:none;appearance:none;transition:border-color 0.25s;cursor:pointer;">
                        <option value="">-- Pasirinkite --</option>
                        <option>Parketo restauravimas</option>
                        <option>Baldų atnaujinimas</option>
                        <option>Medinių lubų priežiūra</option>
                        <option>Kita</option>
                    </select>
                </div>

                <div class="modal-field">
                    <label for="e-area">Plotas (kv. m.) – apytiksliai</label>
                    <input type="number" id="e-area" placeholder="Pvz. 35" min="1" max="10000">
                </div>

                <div class="modal-field">
                    <label for="e-desc">Papildomas aprašymas</label>
                    <textarea id="e-desc" rows="3" placeholder="Aprašykite būklę, ypatingus poreikius..." maxlength="500"></textarea>
                </div>

                <p class="rate-msg" id="e-rate-msg">Per daug bandymų. Palaukite prieš siunčiant.</p>

                <button type="submit" class="btn-modal-submit" id="e-submit-btn">
                    Gauti nemokamą įvertinimą
                </button>

                <p style="font-size:0.6rem;text-align:center;color:rgba(61,43,31,0.3);margin-top:0.8rem;letter-spacing:0.1em;">
                    Jokių įsipareigojimų · Atsakome per 24 val.
                </p>
            </form>
        </div>

        <div class="modal-success" id="estimate-success">
            <span class="success-icon material-symbols-outlined">handshake</span>
            <p style="font-family:'Playfair Display',serif; font-size:1.4rem; color:var(--charcoal); margin-bottom:0.5rem;">Puiku!</p>
            <p style="font-size:0.85rem; color:rgba(61,43,31,0.55); line-height:1.7;">
                Jūsų užklausa gauta. Meistras Jaunius susisieks per 24 valandas su preliminariu kainos pasiūlymu.
            </p>
        </div>
    </div>
</div>

<!-- ======== JAVASCRIPT ======== -->
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
// ── Smooth scroll ──
document.querySelectorAll('a[href^="#"], .smooth-scroll').forEach(el => {
    el.addEventListener('click', function(e) {
        const href = this.getAttribute('href');
        if (href && href.startsWith('#')) {
            e.preventDefault();
            const target = document.querySelector(href);
            if (target) target.scrollIntoView({ behavior: 'smooth' });
        }
    });
});

// ── Header shadow on scroll ──
const header = document.getElementById('main-header');
window.addEventListener('scroll', () => {
    header.classList.toggle('scrolled', window.scrollY > 20);
}, { passive: true });

// ── Read More toggle ──
const btn = document.getElementById('read-more-btn');
const ext = document.getElementById('extended-content');
if (btn && ext) {
    btn.addEventListener('click', () => {
        const isOpen = ext.classList.toggle('open');
        btn.textContent = isOpen ? 'Skaityti mažiau' : 'Skaityti daugiau';
    });
}

// ── Lazy loading ──
if ('IntersectionObserver' in window) {
    const lazyImages = document.querySelectorAll('img[loading="lazy"]');
    const imgObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                if (img.dataset.src) img.src = img.dataset.src;
                imgObserver.unobserve(img);
            }
        });
    });
    lazyImages.forEach(img => imgObserver.observe(img));
}

// ═══════════════════════════════════════════════
//  REVIEWS SYSTEM – Enterprise Edition
// ═══════════════════════════════════════════════

const STORAGE_KEY_APPROVED = 'mm_approved_reviews';
const STORAGE_KEY_PENDING  = 'mm_pending_reviews';
const RATE_LIMIT_KEY       = 'mm_last_review_ts';
const RATE_LIMIT_MS        = 60 * 1000; // 1 min between submissions

// Default seed reviews
const DEFAULT_REVIEWS = [
    {
        id: 'seed1',
        name: 'Rūta Š.',
        text: 'Jaunius atliko parketo šlifavimą puikiausiai. Grindys atrodo kaip naujos – netikėjau, kad įmanoma pasiekti tokį rezultatą. Tikrai rekomenduosiu draugams ir artimiesiems.',
        date: '2025-03-12',
        approved: true
    },
    {
        id: 'seed2',
        name: 'Tomas V.',
        text: 'Profesionalus, punktualus ir tikslus darbas. Baigė viską per sutartą laiką, tvarka buvo palaikoma per visą procesą. Grindys atrodo fantasitkšai.',
        date: '2025-02-28',
        approved: true
    },
    {
        id: 'seed3',
        name: 'Agnė M.',
        text: 'Seni parketiniai laiptai po restauravimo atrodo tiesiog nuostabiai. Labai dėkinga už kantrybę ir detalių dėmesį. Medžio Meistrai – tikri profesionalai.',
        date: '2025-01-15',
        approved: true
    },
    {
        id: 'seed4',
        name: 'Mindaugas K.',
        text: 'Geras darbas, greitas atsakymas į skambučius. Kaina atitiko kokybę. Tikrai naudosiuosi paslaugomis dar kartą.',
        date: '2024-12-20',
        approved: true
    },
    {
        id: 'seed5',
        name: 'Laura B.',
        text: 'Senos ąžuolinės grindys atgavo pirmykštę šlovę! Buvo tikrai įspūdinga matyti transformaciją. Jaunius dirba su širdimi – tai jaučiasi.',
        date: '2024-11-05',
        approved: true
    }
];

// ── State management ──
function getApproved() {
    try {
        const stored = JSON.parse(localStorage.getItem(STORAGE_KEY_APPROVED));
        if (!stored || !stored.length) {
            localStorage.setItem(STORAGE_KEY_APPROVED, JSON.stringify(DEFAULT_REVIEWS));
            return DEFAULT_REVIEWS;
        }
        return stored;
    } catch { return DEFAULT_REVIEWS; }
}

function getPending() {
    try { return JSON.parse(localStorage.getItem(STORAGE_KEY_PENDING)) || []; }
    catch { return []; }
}

function saveApproved(reviews) {
    localStorage.setItem(STORAGE_KEY_APPROVED, JSON.stringify(reviews));
}

function savePending(reviews) {
    localStorage.setItem(STORAGE_KEY_PENDING, JSON.stringify(reviews));
}

// ── Render reviews ──
    html += '</div>';
    return html;
}

function formatDate(dateStr) {
    try {
        return new Date(dateStr).toLocaleDateString('lt-LT', { year: 'numeric', month: 'long', day: 'numeric' });
    } catch { return dateStr; }
}

function renderReviewCard(review, isNew = false) {
    const initial = (review.name || '?')[0].toUpperCase();
    return `
        <div class="review-card${isNew ? ' review-new' : ''}" id="card-${review.id}">
            <div class="review-header">
                <div class="review-avatar">${initial}</div>
                <div>
                    <div class="review-name">${escapeHtml(review.name)}</div>
                    <div class="review-date">${formatDate(review.date)}</div>
                </div>
            </div>
            <p class="review-text">${escapeHtml(review.text)}</p>
            <div class="review-verified">
                <span class="material-symbols-outlined">verified</span>
                Patvirtintas atsiliepimas
            </div>
        </div>
    `;
}


function renderAllReviews() {
    const approved = getApproved();
    const grid = document.getElementById('reviews-grid');
    grid.innerHTML = approved.map(r => renderReviewCard(r)).join('');
}

// ── Escape HTML ──
function escapeHtml(str) {
    return String(str)
        .replace(/&/g,'&amp;')
        .replace(/</g,'&lt;')
        .replace(/>/g,'&gt;')
        .replace(/"/g,'&quot;')
        .replace(/'/g,'&#39;');
}

// ── Review modal ──

function openReviewModal() {
    document.getElementById('review-modal').classList.add('open');
    document.body.style.overflow = 'hidden';
    resetReviewForm();
}

function closeReviewModal() {
    document.getElementById('review-modal').classList.remove('open');
    document.body.style.overflow = '';
}

document.getElementById('review-modal').addEventListener('click', function(e) {
    if (e.target === this) closeReviewModal();
});

function resetReviewForm() {
    document.getElementById('r-name').value = '';
    document.getElementById('r-email').value = '';
    document.getElementById('r-text').value = '';
    document.querySelectorAll('.field-error-msg').forEach(m => m.classList.remove('show'));
    document.querySelectorAll('.modal-field input, .modal-field textarea').forEach(f => f.classList.remove('error'));
    document.getElementById('modal-form-wrap').classList.remove('hide');
    document.getElementById('modal-success').classList.remove('show');
    document.getElementById('rate-msg').classList.remove('show');
}

// Spam check: basic text quality filter
function isSpam(text) {
    const t = text.trim().toLowerCase();
    if (t.length < 20) return true;
    if (/(.)\1{6,}/.test(t)) return true; // repeated chars
    if (/https?:\/\//.test(t)) return true; // URLs
    return false;
}

// Rate limit check
function isRateLimited() {
    const last = parseInt(localStorage.getItem(RATE_LIMIT_KEY) || '0');
    return Date.now() - last < RATE_LIMIT_MS;
}

// Review form submit
document.getElementById('review-form').addEventListener('submit', function(e) {
    e.preventDefault();

    // Honeypot check
    if (this.website.value) return;

    let valid = true;
    const name  = document.getElementById('r-name').value.trim();
    const email = document.getElementById('r-email').value.trim();
    const text  = document.getElementById('r-text').value.trim();

    // Validate name
    if (!name || name.length < 2) {
        document.getElementById('r-name').classList.add('error');
        document.getElementById('err-name').classList.add('show');
        valid = false;
    } else {
        document.getElementById('r-name').classList.remove('error');
        document.getElementById('err-name').classList.remove('show');
    }

    // Validate email
    const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!email || !emailRe.test(email)) {
        document.getElementById('r-email').classList.add('error');
        document.getElementById('err-email').classList.add('show');
        valid = false;
    } else {
        document.getElementById('r-email').classList.remove('error');
        document.getElementById('err-email').classList.remove('show');
    }

    // Validate text
    if (isSpam(text)) {
        document.getElementById('r-text').classList.add('error');
        document.getElementById('err-text').classList.add('show');
        valid = false;
    } else {
        document.getElementById('r-text').classList.remove('error');
        document.getElementById('err-text').classList.remove('show');
    }

    if (!valid) return;

    // Rate limit
    if (isRateLimited()) {
        document.getElementById('rate-msg').classList.add('show');
        return;
    }

    // Save as pending
    const newReview = {
        id: 'rev_' + Date.now(),
        name,
        email,
        text,
        date: new Date().toISOString().split('T')[0],
        approved: false
    };

    const pending = getPending();
    pending.unshift(newReview);
    savePending(pending);
    localStorage.setItem(RATE_LIMIT_KEY, Date.now().toString());

    // Show success
    document.getElementById('modal-form-wrap').classList.add('hide');
    document.getElementById('modal-success').classList.add('show');
});

// ── ADMIN PANEL ──
let adminOpen = false;

document.addEventListener('keydown', function(e) {
    if (e.ctrlKey && e.shiftKey && e.key === 'A') {
        e.preventDefault();
        adminOpen = !adminOpen;
        document.getElementById('admin-panel').classList.toggle('open', adminOpen);
        if (adminOpen) renderAdminPanel();
        // Scroll to reviews
        document.getElementById('atsiliepimai').scrollIntoView({ behavior: 'smooth' });
    }
});

function renderAdminPanel() {
    const pending = getPending();
    const list = document.getElementById('pending-list');
    const noMsg = document.getElementById('no-pending-msg');

    if (!pending.length) {
        list.innerHTML = '';
        noMsg.style.display = 'block';
        return;
    }

    noMsg.style.display = 'none';
    list.innerHTML = pending.map(r => `
        <div class="pending-review-item" id="pending-${r.id}">
            <div style="font-family:'Playfair Display',serif;font-size:0.9rem;color:var(--charcoal);">
                <strong>${escapeHtml(r.name)}</strong> · ${formatDate(r.date)}
            </div>
            <p style="font-size:0.82rem;color:rgba(61,43,31,0.65);line-height:1.6;">${escapeHtml(r.text)}</p>
            <p style="font-size:0.65rem;color:rgba(61,43,31,0.3);">el. paštas: ${escapeHtml(r.email)}</p>
            <div class="pending-actions">
                <button class="btn-approve" onclick="approveReview('${r.id}')">Patvirtinti</button>
                <button class="btn-reject"  onclick="rejectReview('${r.id}')">Ištrinti</button>
            </div>
        </div>
    `).join('');
}

function approveReview(id) {
    const pending  = getPending();
    const approved = getApproved();
    const idx = pending.findIndex(r => r.id === id);
    if (idx === -1) return;

    const review = { ...pending[idx], approved: true };
    pending.splice(idx, 1);
    approved.unshift(review);

    savePending(pending);
    saveApproved(approved);

    // Remove from admin UI
    const el = document.getElementById('pending-' + id);
    if (el) el.remove();

    // Add to reviews grid with animation
    const grid = document.getElementById('reviews-grid');
    grid.insertAdjacentHTML('afterbegin', renderReviewCard(review, true));

    if (!pending.length) document.getElementById('no-pending-msg').style.display = 'block';
}

function rejectReview(id) {
    const pending = getPending();
    const idx = pending.findIndex(r => r.id === id);
    if (idx === -1) return;
    pending.splice(idx, 1);
    savePending(pending);
    const el = document.getElementById('pending-' + id);
    if (el) el.remove();
    if (!pending.length) document.getElementById('no-pending-msg').style.display = 'block';
}

// ═══════════════════════════════════════════════
//  ESTIMATE MODAL
// ═══════════════════════════════════════════════
const ESTIMATE_RATE_KEY = 'mm_last_estimate_ts';
const ESTIMATE_RATE_MS  = 2 * 60 * 1000; // 2 min

function openEstimateModal(e) {
    if (e) e.preventDefault();
    document.getElementById('estimate-modal').classList.add('open');
    document.body.style.overflow = 'hidden';
    resetEstimateForm();
}

function closeEstimateModal() {
    document.getElementById('estimate-modal').classList.remove('open');
    document.body.style.overflow = '';
}

document.getElementById('estimate-modal').addEventListener('click', function(e) {
    if (e.target === this) closeEstimateModal();
});

function resetEstimateForm() {
    document.getElementById('estimate-form').reset();
    document.querySelectorAll('#estimate-form .field-error-msg').forEach(m => m.classList.remove('show'));
    document.querySelectorAll('#estimate-form input, #estimate-form textarea').forEach(f => f.classList.remove('error'));
    document.getElementById('estimate-form-wrap').style.display = '';
    document.getElementById('estimate-success').classList.remove('show');
    document.getElementById('e-rate-msg').classList.remove('show');
}

document.getElementById('estimate-form').addEventListener('submit', function(e) {
    e.preventDefault();
    if (this.website2.value) return;

    let valid = true;
    const name  = document.getElementById('e-name').value.trim();
    const phone = document.getElementById('e-phone').value.trim();

    if (!name || name.length < 2) {
        document.getElementById('e-name').classList.add('error');
        document.getElementById('e-err-name').classList.add('show');
        valid = false;
    } else {
        document.getElementById('e-name').classList.remove('error');
        document.getElementById('e-err-name').classList.remove('show');
    }

    if (!phone || phone.length < 7) {
        document.getElementById('e-phone').classList.add('error');
        document.getElementById('e-err-phone').classList.add('show');
        valid = false;
    } else {
        document.getElementById('e-phone').classList.remove('error');
        document.getElementById('e-err-phone').classList.remove('show');
    }

    if (!valid) return;

    const lastE = parseInt(localStorage.getItem(ESTIMATE_RATE_KEY) || '0');
    if (Date.now() - lastE < ESTIMATE_RATE_MS) {
        document.getElementById('e-rate-msg').classList.add('show');
        return;
    }
    localStorage.setItem(ESTIMATE_RATE_KEY, Date.now().toString());

    // Save estimate request to localStorage for reference
    const req = {
        id: 'est_' + Date.now(),
        name,
        phone,
        type: document.getElementById('e-type').value,
        area: document.getElementById('e-area').value,
        desc: document.getElementById('e-desc').value,
        date: new Date().toISOString()
    };
    const existing = JSON.parse(localStorage.getItem('mm_e

